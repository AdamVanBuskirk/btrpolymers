{"ast":null,"code":"import _toConsumableArray from\"/Users/adamvanbuskirk/Sites/btrpolymers/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/adamvanbuskirk/Sites/btrpolymers/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/adamvanbuskirk/Sites/btrpolymers/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import{axiosPrivate}from'../Core/axios';var initialState={actionsLeaderboard:[],status:\"unset\",errorMessage:\"\"};export var getActionsLeaderboardReport=createAsyncThunk('get-actions-leaderboard-report',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axiosPrivate.get('api/report/company/'+params.companyId+'/team/'+params.teamId+'/'+params.weekChoice+'?timezone='+params.timezone,{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data;});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var ReportSlice=createSlice({name:'report',initialState:initialState,reducers:{},extraReducers:function extraReducers(builder){builder.addCase(getActionsLeaderboardReport.pending,function(state){state.status='loading';}).addCase(getActionsLeaderboardReport.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;}).addCase(getActionsLeaderboardReport.fulfilled,function(state,action){state.status='idle';state.actionsLeaderboard=_toConsumableArray(action.payload);});}});export var getReport=function getReport(state){return state.report;};export default ReportSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axiosPrivate","initialState","actionsLeaderboard","status","errorMessage","getActionsLeaderboardReport","params","get","companyId","teamId","weekChoice","timezone","headers","withCredentials","then","res","data","ReportSlice","name","reducers","extraReducers","builder","addCase","pending","state","rejected","action","error","message","fulfilled","payload","getReport","report","reducer"],"sources":["/Users/adamvanbuskirk/Sites/btrpolymers/client/src/Store/Report.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { RootState } from '../Core/store';\nimport { axiosPrivate } from '../Core/axios';\nimport { companyStatus } from '../Helpers/types';\n\n\n\ninterface ActionLeaderBoard {\n  teamId: string;\n  weekChoice: string;\n\n  actionColumns: { id: string; label: string }[];\n  amountColumns: { id: string; label: string }[];\n\n  shortRange: ActionLeaderBoardDetail[];\n  longRange: ActionLeaderBoardDetail[];\n}\n\ninterface ActionLeaderBoardDetail {\n  rank: number;\n  userId: string;\n\n  fullName: string;\n  email: string;\n  teamName: string;\n\n  totalActions: number;\n  submissions: number;\n  avgActionsPerSubmission: number;\n  successOfWeek: number;\n\n  actionsById: Record<string, number>;   // actionId -> count\n  amountsById: Record<string, number>;   // amountId -> sum\n}\n\n\nexport interface ReportState {\n  actionsLeaderboard: ActionLeaderBoard[]\n  status: companyStatus;\n  errorMessage: string;\n}\n\nconst initialState: ReportState = {\n  actionsLeaderboard: [],\n  status: \"unset\",\n  errorMessage: \"\",\n};\n\n\nexport const getActionsLeaderboardReport = createAsyncThunk(\n  'get-actions-leaderboard-report',\n  async (params: { companyId: string, teamId: string, weekChoice: string, timezone: string }) => {    \n    return await axiosPrivate.get('api/report/company/' + params.companyId + '/team/' + params.teamId + '/' + params.weekChoice + '?timezone=' + params.timezone,\n      {\n        headers: { 'Content-Type': 'application/json' },\n        withCredentials: true\n      }\n    ).then(\n      (res) => {\n          return res.data;\n      }\n    );\n});\n\nexport const ReportSlice = createSlice({\n  name: 'report',\n  initialState,\n  reducers: {\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(getActionsLeaderboardReport.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(getActionsLeaderboardReport.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(getActionsLeaderboardReport.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.actionsLeaderboard = [...action.payload];\n      })\n  },\n});\n\nexport const getReport = (state: RootState) => state.report;\nexport default ReportSlice.reducer;\n"],"mappings":"oaAAA,OAASA,gBAAT,CAA2BC,WAA3B,KAA8C,kBAA9C,CAEA,OAASC,YAAT,KAA6B,eAA7B,CAwCA,GAAMC,aAAyB,CAAG,CAChCC,kBAAkB,CAAE,EADY,CAEhCC,MAAM,CAAE,OAFwB,CAGhCC,YAAY,CAAE,EAHkB,CAAlC,CAOA,MAAO,IAAMC,4BAA2B,CAAGP,gBAAgB,CACzD,gCADyD,4FAEzD,iBAAOQ,MAAP,0IACeN,aAAY,CAACO,GAAb,CAAiB,sBAAwBD,MAAM,CAACE,SAA/B,CAA2C,QAA3C,CAAsDF,MAAM,CAACG,MAA7D,CAAsE,GAAtE,CAA4EH,MAAM,CAACI,UAAnF,CAAgG,YAAhG,CAA+GJ,MAAM,CAACK,QAAvI,CACX,CACEC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CADX,CAEEC,eAAe,CAAE,IAFnB,CADW,EAKXC,IALW,CAMX,SAACC,GAAD,CAAS,CACL,MAAOA,IAAG,CAACC,IAAX,CACH,CARU,CADf,6GAFyD,+DAApD,CAeP,MAAO,IAAMC,YAAW,CAAGlB,WAAW,CAAC,CACrCmB,IAAI,CAAE,QAD+B,CAErCjB,YAAY,CAAZA,YAFqC,CAGrCkB,QAAQ,CAAE,EAH2B,CAKrCC,aAAa,CAAE,uBAACC,OAAD,CAAa,CAC1BA,OAAO,CACJC,OADH,CACWjB,2BAA2B,CAACkB,OADvC,CACgD,SAACC,KAAD,CAAW,CACvDA,KAAK,CAACrB,MAAN,CAAe,SAAf,CACD,CAHH,EAIGmB,OAJH,CAIWjB,2BAA2B,CAACoB,QAJvC,CAIiD,SAACD,KAAD,CAAQE,MAAR,CAAmB,CAChEF,KAAK,CAACrB,MAAN,CAAe,QAAf,CACAqB,KAAK,CAACpB,YAAN,CAAqBsB,MAAM,CAACC,KAAP,CAAaC,OAAlC,CACD,CAPH,EAQGN,OARH,CAQWjB,2BAA2B,CAACwB,SARvC,CAQkD,SAACL,KAAD,CAAQE,MAAR,CAAmB,CACjEF,KAAK,CAACrB,MAAN,CAAe,MAAf,CACAqB,KAAK,CAACtB,kBAAN,oBAA+BwB,MAAM,CAACI,OAAtC,EACD,CAXH,EAYD,CAlBoC,CAAD,CAA/B,CAqBP,MAAO,IAAMC,UAAS,CAAG,QAAZA,UAAY,CAACP,KAAD,QAAsBA,MAAK,CAACQ,MAA5B,EAAlB,CACP,cAAef,YAAW,CAACgB,OAA3B"},"metadata":{},"sourceType":"module"}