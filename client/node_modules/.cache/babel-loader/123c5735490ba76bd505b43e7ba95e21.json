{"ast":null,"code":"import React from'react';import{useEffect}from'react';import{useAppDispatch,useAppSelector}from'../../Core/hooks';import{useParams}from'react-router-dom';import{getCompany,getCompanyPublic}from\"../../Store/Company\";import{getUser,logoutForInvite,setLoggedOutForInvite}from'../../Store/Auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CompanyInvite(){var dispatch=useAppDispatch();var _useParams=useParams(),company=_useParams.company,link=_useParams.link;var companyState=useAppSelector(getCompany);var userState=useAppSelector(getUser);//const [fetched, setFetched] = useState(false);\nuseEffect(function(){if(company&&link){dispatch(logoutForInvite());}},[company,link]);useEffect(function(){if(company&&link&&userState.loggedOutForInvite){dispatch(setLoggedOutForInvite(false));dispatch(getCompanyPublic({companyId:company,link:link}));}},[userState.loggedOutForInvite]);/*\n    useEffect(() => {\n      if (!company || !link || fetched) return;\n      if (userState.status !== \"idle\" && userState.status !== \"failed\") return;\n    \n      const timer = setTimeout(() => {\n        console.log(\"loading company public after logout\");\n        dispatch(getCompanyPublic({ companyId: company, link }));\n      }, 1000);\n    \n      return () => clearTimeout(timer);\n    }, [company, link, userState.status, fetched]);\n*/if(company&&companyState.inviteCompany){var loginLink=process.env.REACT_APP_FRONTEND_URL+\"/login/\"+company+\"/\"+link;var registerLink=process.env.REACT_APP_FRONTEND_URL+\"/register/\"+company+\"/\"+link;return/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/sales-doing-logo.jpg\",style:{width:\"300px\"},alt:\"SalesDoing\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"18pt\"},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0Access\\xA0\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"bold\"},children:companyState.inviteCompany.name}),/*#__PURE__*/_jsx(\"span\",{children:\"\\xA0to start using the SalesDoing platform.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginTop:\"15px\",marginBottom:\"35px\"},children:[/*#__PURE__*/_jsx(\"a\",{href:registerLink,className:\"inviteBtnOrange\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"a\",{href:loginLink,className:\"inviteBtnGray\",children:\"Login\"})]})]});}else{// just to satisfy App that this component can't be undefined\nreturn/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",margin:\"0px auto\",color:\"gray\",fontSize:\"18pt\",textAlign:\"center\",paddingTop:\"100px\"},children:\"Loading Invite...\"});}}export default CompanyInvite;","map":{"version":3,"names":["React","useEffect","useAppDispatch","useAppSelector","useParams","getCompany","getCompanyPublic","getUser","logoutForInvite","setLoggedOutForInvite","CompanyInvite","dispatch","company","link","companyState","userState","loggedOutForInvite","companyId","inviteCompany","loginLink","process","env","REACT_APP_FRONTEND_URL","registerLink","width","fontSize","fontWeight","name","textAlign","marginTop","marginBottom","height","margin","color","paddingTop"],"sources":["/Users/adamvanbuskirk/Sites/btrpolymers/client/src/Pages/Public/CompanyInvite.tsx"],"sourcesContent":["import React, { CSSProperties, useState } from 'react';\nimport { useEffect } from 'react';\nimport { useAppDispatch, useAppSelector } from '../../Core/hooks';\nimport { useParams } from 'react-router-dom';\nimport { getCompany, getCompanyPublic } from \"../../Store/Company\";\nimport Avatar from '../../Components/Avatar';\nimport { getUser, logout, logoutForInvite, setLoggedOutForInvite } from '../../Store/Auth';\nimport { getDevice } from '../../Helpers/getDevice';\n\nfunction CompanyInvite() {\n\n    const dispatch = useAppDispatch();\n    const {company, link } = useParams();\n    const companyState = useAppSelector(getCompany);\n    const userState = useAppSelector(getUser);\n\n    //const [fetched, setFetched] = useState(false);\n\n    useEffect(() => {\n      if (company && link) {\n        dispatch(logoutForInvite());\n        \n      }\n    }, [company, link]);\n\n    useEffect(() => {\n        if (company && link && userState.loggedOutForInvite) {\n            dispatch(setLoggedOutForInvite(false));\n            dispatch(getCompanyPublic({ companyId: company, link }));\n        }\n    }, [userState.loggedOutForInvite]);\n    \n\n    /*\n    useEffect(() => {\n      if (!company || !link || fetched) return;\n      if (userState.status !== \"idle\" && userState.status !== \"failed\") return;\n    \n      const timer = setTimeout(() => {\n        console.log(\"loading company public after logout\");\n        dispatch(getCompanyPublic({ companyId: company, link }));\n      }, 1000);\n    \n      return () => clearTimeout(timer);\n    }, [company, link, userState.status, fetched]);\n*/\n\n    if (company && companyState.inviteCompany) {\n\n        let loginLink = process.env.REACT_APP_FRONTEND_URL + \"/login/\" + company + \"/\" + link;\n        let registerLink = process.env.REACT_APP_FRONTEND_URL + \"/register/\" + company + \"/\" + link;\n\n        return (\n            <div className=\"pt-4 text-center\">\n                <div>\n                    <img src=\"/images/sales-doing-logo.jpg\" style={{ width: \"300px\" }} alt=\"SalesDoing\" />    \n                </div>\n                <div style={{ fontSize: \"18pt\" }}>\n                    <span>\n                        &nbsp;Access&nbsp;\n                    </span>\n                    <span style={{ fontWeight: \"bold\" }}>\n                        {companyState.inviteCompany.name}\n                    </span>\n                    <span>\n                        &nbsp;to start using the SalesDoing platform.\n                    </span>\n                </div>\n                <div style={{ textAlign: \"center\", marginTop: \"15px\", marginBottom: \"35px\" }}>\n                    <a href={registerLink} className=\"inviteBtnOrange\">\n                        Sign Up\n                    </a>\n                    <a href={loginLink} className=\"inviteBtnGray\">\n                        Login\n                    </a>\n                </div>\n            </div>\n        );\n    } else {\n        // just to satisfy App that this component can't be undefined\n        return (<div style={{ width: \"100%\", height: \"100%\", margin: \"0px auto\", color: \"gray\",\n            fontSize: \"18pt\", textAlign: \"center\", paddingTop: \"100px\"\n         }}>\n            Loading Invite...\n        </div>);\n    }\n}\n\nexport default CompanyInvite;"],"mappings":"AAAA,MAAOA,MAAP,KAA+C,OAA/C,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,kBAA/C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,UAAT,CAAqBC,gBAArB,KAA6C,qBAA7C,CAEA,OAASC,OAAT,CAA0BC,eAA1B,CAA2CC,qBAA3C,KAAwE,kBAAxE,C,wFAGA,QAASC,cAAT,EAAyB,CAErB,GAAMC,SAAQ,CAAGT,cAAc,EAA/B,CACA,eAAyBE,SAAS,EAAlC,CAAOQ,OAAP,YAAOA,OAAP,CAAgBC,IAAhB,YAAgBA,IAAhB,CACA,GAAMC,aAAY,CAAGX,cAAc,CAACE,UAAD,CAAnC,CACA,GAAMU,UAAS,CAAGZ,cAAc,CAACI,OAAD,CAAhC,CAEA;AAEAN,SAAS,CAAC,UAAM,CACd,GAAIW,OAAO,EAAIC,IAAf,CAAqB,CACnBF,QAAQ,CAACH,eAAe,EAAhB,CAAR,CAED,CACF,CALQ,CAKN,CAACI,OAAD,CAAUC,IAAV,CALM,CAAT,CAOAZ,SAAS,CAAC,UAAM,CACZ,GAAIW,OAAO,EAAIC,IAAX,EAAmBE,SAAS,CAACC,kBAAjC,CAAqD,CACjDL,QAAQ,CAACF,qBAAqB,CAAC,KAAD,CAAtB,CAAR,CACAE,QAAQ,CAACL,gBAAgB,CAAC,CAAEW,SAAS,CAAEL,OAAb,CAAsBC,IAAI,CAAJA,IAAtB,CAAD,CAAjB,CAAR,CACH,CACJ,CALQ,CAKN,CAACE,SAAS,CAACC,kBAAX,CALM,CAAT,CAQA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAEI,GAAIJ,OAAO,EAAIE,YAAY,CAACI,aAA5B,CAA2C,CAEvC,GAAIC,UAAS,CAAGC,OAAO,CAACC,GAAR,CAAYC,sBAAZ,CAAqC,SAArC,CAAiDV,OAAjD,CAA2D,GAA3D,CAAiEC,IAAjF,CACA,GAAIU,aAAY,CAAGH,OAAO,CAACC,GAAR,CAAYC,sBAAZ,CAAqC,YAArC,CAAoDV,OAApD,CAA8D,GAA9D,CAAoEC,IAAvF,CAEA,mBACI,aAAK,SAAS,CAAC,kBAAf,wBACI,kCACI,YAAK,GAAG,CAAC,8BAAT,CAAwC,KAAK,CAAE,CAAEW,KAAK,CAAE,OAAT,CAA/C,CAAmE,GAAG,CAAC,YAAvE,EADJ,EADJ,cAII,aAAK,KAAK,CAAE,CAAEC,QAAQ,CAAE,MAAZ,CAAZ,wBACI,wCADJ,cAII,aAAM,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAd,CAAb,UACKZ,YAAY,CAACI,aAAb,CAA2BS,IADhC,EAJJ,cAOI,qEAPJ,GAJJ,cAeI,aAAK,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAuBC,SAAS,CAAE,MAAlC,CAA0CC,YAAY,CAAE,MAAxD,CAAZ,wBACI,UAAG,IAAI,CAAEP,YAAT,CAAuB,SAAS,CAAC,iBAAjC,qBADJ,cAII,UAAG,IAAI,CAAEJ,SAAT,CAAoB,SAAS,CAAC,eAA9B,mBAJJ,GAfJ,GADJ,CA0BH,CA/BD,IA+BO,CACH;AACA,mBAAQ,YAAK,KAAK,CAAE,CAAEK,KAAK,CAAE,MAAT,CAAiBO,MAAM,CAAE,MAAzB,CAAiCC,MAAM,CAAE,UAAzC,CAAqDC,KAAK,CAAE,MAA5D,CAChBR,QAAQ,CAAE,MADM,CACEG,SAAS,CAAE,QADb,CACuBM,UAAU,CAAE,OADnC,CAAZ,+BAAR,CAKH,CACJ,CAED,cAAexB,cAAf"},"metadata":{},"sourceType":"module"}