{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adamvanbuskirk/Sites/btrpolymers/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/adamvanbuskirk/Sites/btrpolymers/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import{axiosPrivate,axiosPublic}from'../Core/axios';import{decodeToken}from'../Helpers/DecodeToken';var initialState={_id:\"\",sessionId:\"\",accessToken:\"\",loggingIn:false,status:'unset',//type: \"\",\nemail:\"\",errorMessage:\"\",activationNeeded:false,firstName:\"\",lastName:\"\",avatar:\"\",defaultAvatarColor:\"\",defaultAvatarFontColor:\"\",created:null,lastHeartbeat:\"\",acceptedInvite:false,inviteCompanyId:\"\",loggedOutForInvite:false,earlyAdopter:false};export var register=createAsyncThunk('api/auth/register',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(credentials){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axiosPublic.post('api/auth/register',JSON.stringify(credentials),{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data;});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var activateUser=createAsyncThunk('api/auth/activate',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(activationCode){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axiosPublic.post('api/auth/activate',JSON.stringify({activationCode:activationCode}),{headers:{'Content-Type':'application/json'}}).then(function(res){return res.data;});case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var login=createAsyncThunk('api/auth/login',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(credentials){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axiosPublic.post('api/auth/login',JSON.stringify(credentials),{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data;});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}());export var resendActivationLink=createAsyncThunk('api/auth/activate/resend',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(email){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axiosPublic.post('api/auth/activate/resend',JSON.stringify({email:email}),{headers:{'Content-Type':'application/json'}//withCredentials: true\n}).then(function(res){return res.data;});case 2:return _context4.abrupt(\"return\",_context4.sent);case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}());export var sendRecoveryLink=createAsyncThunk('api/auth/password/recover',/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(email){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axiosPublic.post('api/auth/password/recover',JSON.stringify({email:email}),{headers:{'Content-Type':'application/json'}}).then(function(res){return res.data;});case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}());export var resetPassword=createAsyncThunk('api/auth/password/change',/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(credentials){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return axiosPublic.post('api/auth/password/change',JSON.stringify({password:credentials.password,recoveryCode:credentials.recoveryCode}),{headers:{'Content-Type':'application/json'}}).then(function(res){return res.data;});case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}());export var socialLogin=createAsyncThunk('api/auth/login/social',/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(credentials){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axiosPublic.post('api/auth/login/social',JSON.stringify(credentials),{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data;});case 2:return _context7.abrupt(\"return\",_context7.sent);case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref7.apply(this,arguments);};}());export var logout=createAsyncThunk(//action type string\n'api/auth/logout',/*#__PURE__*/ // callback function\n_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return axiosPublic.get('api/auth/logout',{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data;});case 2:return _context8.abrupt(\"return\",_context8.sent);case 3:case\"end\":return _context8.stop();}}},_callee8);})));export var logoutForInvite=createAsyncThunk('api/auth/logout/forinvite',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(){return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return axiosPublic.get('api/auth/logout',{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data;});case 2:return _context9.abrupt(\"return\",_context9.sent);case 3:case\"end\":return _context9.stop();}}},_callee9);})));export var refreshAccessToken=createAsyncThunk('api/auth/refresh',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(){return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return axiosPublic.get('api/auth/refresh',{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data.accessToken;});case 2:return _context10.abrupt(\"return\",_context10.sent);case 3:case\"end\":return _context10.stop();}}},_callee10);})));export var getAvatar=createAsyncThunk('api/auth/avatar',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(){return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return axiosPrivate.get('api/auth/avatar',{headers:{'Content-Type':'application/json'},withCredentials:true}).then(function(res){return res.data;});case 2:return _context11.abrupt(\"return\",_context11.sent);case 3:case\"end\":return _context11.stop();}}},_callee11);})));export var setAvatar=createAsyncThunk('set/avatar',/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(avatar){return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:return _context12.abrupt(\"return\",avatar);case 1:case\"end\":return _context12.stop();}}},_callee12);}));return function(_x8){return _ref12.apply(this,arguments);};}());export var setLastHeartbeat=createAsyncThunk('set-last-heartbeat',/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(heartbeat){return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.abrupt(\"return\",heartbeat);case 1:case\"end\":return _context13.stop();}}},_callee13);}));return function(_x9){return _ref13.apply(this,arguments);};}());export var setAuthStatus=createAsyncThunk('set-auth-status',/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(status){return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:return _context14.abrupt(\"return\",status);case 1:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x10){return _ref14.apply(this,arguments);};}());export var setLoggedOutForInvite=createAsyncThunk('set-logged-out-for-invite',/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(loggedOutForInvite){return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:return _context15.abrupt(\"return\",loggedOutForInvite);case 1:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x11){return _ref15.apply(this,arguments);};}());export var User=createSlice({name:'user',initialState:initialState,// The `reducers` field lets us define reducers and generate associated actions\nreducers:{/*\n    increment: (state) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.value += 1;\n    },\n    decrement: (state) => {\n      state.value -= 1;\n    },\n    // Use the PayloadAction type to declare the contents of `action.payload`\n    incrementByAmount: (state, action: PayloadAction<number>) => {\n      state.value += action.payload;\n    },*/setAccessToken:function setAccessToken(state,action){state.accessToken=action.payload;},setLoggingIn:function setLoggingIn(state,action){state.loggingIn=action.payload;},resetActivationNeeded:function resetActivationNeeded(state,action){state.activationNeeded=action.payload;}},// The `extraReducers` field lets the slice handle actions defined elsewhere,\n// including actions generated by createAsyncThunk or in other slices.\nextraReducers:function extraReducers(builder){builder.addCase(setLoggedOutForInvite.fulfilled,function(state,action){state.loggedOutForInvite=action.payload;}).addCase(setAvatar.fulfilled,function(state,action){state.status='idle';state.avatar=action.payload;}).addCase(setLastHeartbeat.fulfilled,function(state,action){state.lastHeartbeat=action.payload;}).addCase(setAuthStatus.fulfilled,function(state,action){state.status=action.payload;state.acceptedInvite=false;/* reset invite accepted flag */state.inviteCompanyId=\"\";}).addCase(getAvatar.fulfilled,function(state,action){state.status='idle';state.earlyAdopter=action.payload.earlyAdopter;state.created=action.payload.created;state.avatar=action.payload.avatar;state.defaultAvatarColor=action.payload.defaultAvatarColor;state.defaultAvatarFontColor=action.payload.defaultAvatarFontColor;})/*\n      .addCase(saveAvatar.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.avatar = action.payload;\n      })\n      .addCase(saveAvatar.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(removeAvatar.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.avatar = action.payload;\n      })\n      \n      .addCase(removeAvatar.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n        */.addCase(login.pending,function(state){state.status='loading';}).addCase(login.fulfilled,function(state,action){state.status='loggedIn';state.loggingIn=action.payload.loggingIn;state.acceptedInvite=action.payload.isInvite;state.inviteCompanyId=action.payload.companyId;state.accessToken=action.payload.accessToken;var payload=decodeToken(action.payload.accessToken);if(payload){state._id=payload._id;state.email=payload.email;state.firstName=payload.given_name;state.lastName=payload.family_name;}}).addCase(login.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;if(state.errorMessage===\"Your account needs activated.\"){state.activationNeeded=true;}}).addCase(socialLogin.pending,function(state){state.status='loading';}).addCase(socialLogin.fulfilled,function(state,action){state.status='loggedIn';state.loggingIn=action.payload.loggingIn;state.acceptedInvite=action.payload.isInvite;state.inviteCompanyId=action.payload.companyId;state.accessToken=action.payload.accessToken;var payload=decodeToken(action.payload.accessToken);if(payload){state._id=payload._id;state.email=payload.email;state.firstName=payload.given_name;state.lastName=payload.family_name;}}).addCase(socialLogin.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;}).addCase(refreshAccessToken.pending,function(state){state.status='loading';}).addCase(refreshAccessToken.fulfilled,function(state,action){state.status='idle';//console.log(action.payload);\nstate.accessToken=action.payload;var payload=decodeToken(action.payload);if(payload){//console.log(payload);\n//state.type = payload.type;\nstate._id=payload._id;state.email=payload.email;state.firstName=payload.given_name;state.lastName=payload.family_name;}}).addCase(refreshAccessToken.rejected,function(state){state.status='failed';state.accessToken=\"\";/* log user out */}).addCase(logout.pending,function(state){state.status='loading';}).addCase(logout.fulfilled,function(state){state.status='idle';state.accessToken=\"\";}).addCase(logout.rejected,function(state){state.status='failed';}).addCase(logoutForInvite.fulfilled,function(state){state.status='idle';state.loggedOutForInvite=true;}).addCase(logoutForInvite.rejected,function(state){state.status='failed';state.loggedOutForInvite=true;}).addCase(register.pending,function(state){state.status='loading';}).addCase(register.fulfilled,function(state,action){state.status='loggedIn';state.loggingIn=action.payload.loggingIn;state.acceptedInvite=action.payload.isInvite;state.inviteCompanyId=action.payload.companyId;state.accessToken=action.payload.accessToken;state.sessionId=action.payload.sessionId;var payload=decodeToken(action.payload.accessToken);if(payload){state._id=payload._id;state.email=payload.email;state.firstName=payload.given_name;state.lastName=payload.family_name;}}).addCase(register.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;}).addCase(activateUser.pending,function(state){state.status='loading';}).addCase(activateUser.fulfilled,function(state){state.status='idle';}).addCase(activateUser.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;}).addCase(resendActivationLink.pending,function(state){state.status='loading';}).addCase(resendActivationLink.fulfilled,function(state){state.status='idle';}).addCase(resendActivationLink.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;}).addCase(sendRecoveryLink.pending,function(state){state.status='loading';}).addCase(sendRecoveryLink.fulfilled,function(state){state.status='idle';}).addCase(sendRecoveryLink.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;}).addCase(resetPassword.pending,function(state){state.status='loading';}).addCase(resetPassword.fulfilled,function(state){state.status='idle';}).addCase(resetPassword.rejected,function(state,action){state.status='failed';state.errorMessage=action.error.message;});}});var _User$actions=User.actions,setAccessToken=_User$actions.setAccessToken,setLoggingIn=_User$actions.setLoggingIn,resetActivationNeeded=_User$actions.resetActivationNeeded;//export const { increment, decrement, incrementByAmount } = counterSlice.actions;\n// The function below is called a selector and allows us to select a value from\n// the state. Selectors can also be defined inline where they're used instead of\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\nexport{setAccessToken,setLoggingIn,resetActivationNeeded};export var getUser=function getUser(state){return state.user;};// We can also write thunks by hand, which may contain both sync and async logic.\n// Here's an example of conditionally dispatching actions based on current state.\n/*export const incrementIfOdd =\n  (amount: number): AppThunk =>\n  (dispatch, getState) => {\n    const currentValue = selectCount(getState());\n    if (currentValue % 2 === 1) {\n      dispatch(incrementByAmount(amount));\n    }\n  };*/export default User.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axiosPrivate","axiosPublic","decodeToken","initialState","_id","sessionId","accessToken","loggingIn","status","email","errorMessage","activationNeeded","firstName","lastName","avatar","defaultAvatarColor","defaultAvatarFontColor","created","lastHeartbeat","acceptedInvite","inviteCompanyId","loggedOutForInvite","earlyAdopter","register","credentials","post","JSON","stringify","headers","withCredentials","then","res","data","activateUser","activationCode","login","resendActivationLink","sendRecoveryLink","resetPassword","password","recoveryCode","socialLogin","logout","get","logoutForInvite","refreshAccessToken","getAvatar","setAvatar","setLastHeartbeat","heartbeat","setAuthStatus","setLoggedOutForInvite","User","name","reducers","setAccessToken","state","action","payload","setLoggingIn","resetActivationNeeded","extraReducers","builder","addCase","fulfilled","pending","isInvite","companyId","given_name","family_name","rejected","error","message","actions","getUser","user","reducer"],"sources":["/Users/adamvanbuskirk/Sites/btrpolymers/client/src/Store/Auth.ts"],"sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../Core/store';\nimport { Credentials } from '../Models/Requests/Credentials';\nimport { RegistrationCredentials } from '../Models/Requests/RegistrationCredentials';\nimport { axiosPrivate, axiosPublic } from '../Core/axios';\nimport { decodeToken } from '../Helpers/DecodeToken';\nimport { SocialCredentials } from '../Models/Requests/SocialCredentials';\nimport { sliceStatus } from '../Helpers/types';\nimport { PasswordReset } from '../Models/Requests/PasswordReset';\nimport { strictEqual } from 'assert';\n\nexport interface UserState {\n  _id: string;\n  sessionId: string;\n  accessToken: string;\n  loggingIn: boolean;\n  status: sliceStatus;\n  email: string;\n  errorMessage: string;\n  activationNeeded: boolean;\n  firstName: string;\n  lastName: string;\n  avatar: string;\n  defaultAvatarColor: string;\n  defaultAvatarFontColor: string;\n  created: Date | null;\n  lastHeartbeat: string;\n  acceptedInvite: boolean;\n  inviteCompanyId: string;\n  loggedOutForInvite: boolean;\n  earlyAdopter: boolean;\n}\n\nconst initialState: UserState = {\n  _id: \"\",\n  sessionId: \"\",\n  accessToken: \"\",\n  loggingIn: false,\n  status: 'unset',\n  //type: \"\",\n  email: \"\",\n  errorMessage: \"\",\n  activationNeeded: false,\n  firstName: \"\",\n  lastName: \"\",\n  avatar: \"\",\n  defaultAvatarColor: \"\",\n  defaultAvatarFontColor: \"\",\n  created: null,\n  lastHeartbeat: \"\",\n  acceptedInvite: false,\n  inviteCompanyId: \"\",\n  loggedOutForInvite: false,\n  earlyAdopter: false\n};\n\nexport const register = createAsyncThunk(\n  'api/auth/register',\n  async (credentials: RegistrationCredentials) => {    \n      return await axiosPublic.post('api/auth/register',\n          JSON.stringify(credentials),\n          {\n              headers: { 'Content-Type': 'application/json' },\n              withCredentials: true\n          }\n      ).then(\n          (res) => {\n              return res.data;\n          }\n      );\n});\n\nexport const activateUser = createAsyncThunk(\n  'api/auth/activate',\n  async (activationCode: string) => {    \n    return await axiosPublic.post('api/auth/activate',\n      JSON.stringify({\n          activationCode: activationCode,\n      }),\n      {\n        headers: { 'Content-Type': 'application/json' },\n      }\n    ).then(\n      (res) => {\n          return res.data;\n      }\n    );\n});\n\nexport const login = createAsyncThunk(\n  'api/auth/login',\n  async (credentials: Credentials) => {    \n    return await axiosPublic.post('api/auth/login',\n      JSON.stringify(credentials),\n      {\n          headers: { 'Content-Type': 'application/json' },\n          withCredentials: true\n      }\n    ).then(\n      (res) => {\n          return res.data;\n      }\n    );\n});\n\nexport const resendActivationLink = createAsyncThunk(\n  'api/auth/activate/resend',\n  async (email: string) => {    \n      return await axiosPublic.post('api/auth/activate/resend',\n        JSON.stringify({\n            email: email,\n        }),\n        {\n            headers: { 'Content-Type': 'application/json' },\n            //withCredentials: true\n        }\n      ).then(\n        (res) => {\n            return res.data;\n        }\n      );\n});\n\nexport const sendRecoveryLink = createAsyncThunk(\n  'api/auth/password/recover',\n  async (email: string) => {    \n    return await axiosPublic.post('api/auth/password/recover',\n      JSON.stringify({\n          email: email,\n      }),\n      {\n          headers: { 'Content-Type': 'application/json' },\n      }\n    ).then(\n      (res) => {\n          return res.data;\n      }\n    );\n});\n\nexport const resetPassword = createAsyncThunk(\n  'api/auth/password/change',\n  async (credentials: PasswordReset) => {    \n    return await axiosPublic.post('api/auth/password/change',\n      JSON.stringify({\n          password: credentials.password,\n          recoveryCode: credentials.recoveryCode\n      }),\n      {\n          headers: { 'Content-Type': 'application/json' },\n      }\n    ).then(\n      (res) => {\n          return res.data;\n      }\n    );\n});\n\nexport const socialLogin = createAsyncThunk(\n  'api/auth/login/social',\n  async (credentials: SocialCredentials) => {    \n      return await axiosPublic.post('api/auth/login/social',\n          JSON.stringify(credentials),\n          {\n              headers: { 'Content-Type': 'application/json' },\n              withCredentials: true\n          }\n      ).then(\n          (res) => {\n              return res.data;\n          }\n      );\n});\n\nexport const logout = createAsyncThunk(\n  //action type string\n  'api/auth/logout',\n  // callback function\n  async () => {\n    return await axiosPublic.get('api/auth/logout',\n        {\n            headers: { 'Content-Type': 'application/json' },\n            withCredentials: true \n        }\n        ).then(\n          (res) => {\n              return res.data;\n          }\n      );\n});\n\nexport const logoutForInvite = createAsyncThunk(\n  'api/auth/logout/forinvite',\n  async () => {\n    return await axiosPublic.get('api/auth/logout',\n        {\n            headers: { 'Content-Type': 'application/json' },\n            withCredentials: true \n        }\n        ).then(\n          (res) => {\n              return res.data;\n          }\n      );\n});\n\nexport const refreshAccessToken = createAsyncThunk(\n  'api/auth/refresh',\n  async () => {\n    return await axiosPublic.get('api/auth/refresh',\n        {\n            headers: { 'Content-Type': 'application/json' },\n            withCredentials: true \n        }\n    ).then(res => res.data.accessToken);\n});\n\nexport const getAvatar = createAsyncThunk(\n  'api/auth/avatar',\n  async () => {\n    return await axiosPrivate.get('api/auth/avatar',\n        {\n            headers: { 'Content-Type': 'application/json' },\n            withCredentials: true \n        }\n    ).then(res => res.data);\n});\n\nexport const setAvatar = createAsyncThunk(\n  'set/avatar',\n  async (avatar: string) => {    \n      return avatar;\n});\n\nexport const setLastHeartbeat = createAsyncThunk(\n  'set-last-heartbeat',\n  async (heartbeat: string) => {    \n      return heartbeat;\n});\n\nexport const setAuthStatus = createAsyncThunk(\n  'set-auth-status',\n  async (status: sliceStatus) => {    \n      return status;\n});\n\nexport const setLoggedOutForInvite = createAsyncThunk(\n  'set-logged-out-for-invite',\n  async (loggedOutForInvite: boolean) => {    \n      return loggedOutForInvite;\n});\n\nexport const User = createSlice({\n  name: 'user',\n  initialState,\n  // The `reducers` field lets us define reducers and generate associated actions\n  reducers: {\n    /*\n    increment: (state) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.value += 1;\n    },\n    decrement: (state) => {\n      state.value -= 1;\n    },\n    // Use the PayloadAction type to declare the contents of `action.payload`\n    incrementByAmount: (state, action: PayloadAction<number>) => {\n      state.value += action.payload;\n    },*/\n    \n    setAccessToken: (state, action: PayloadAction<string>) => {\n        state.accessToken = action.payload;\n    },\n    setLoggingIn: (state, action: PayloadAction<boolean>) => {\n        state.loggingIn = action.payload;\n    },\n    resetActivationNeeded: (state, action: PayloadAction<boolean>) => {\n      state.activationNeeded = action.payload;\n    },\n  },\n  // The `extraReducers` field lets the slice handle actions defined elsewhere,\n  // including actions generated by createAsyncThunk or in other slices.\n  extraReducers: (builder) => {\n    builder\n      .addCase(setLoggedOutForInvite.fulfilled, (state, action) => {\n        state.loggedOutForInvite = action.payload;\n      })\n      .addCase(setAvatar.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.avatar = action.payload;\n      })\n      .addCase(setLastHeartbeat.fulfilled, (state, action) => {\n        state.lastHeartbeat = action.payload;\n      })\n      .addCase(setAuthStatus.fulfilled, (state, action) => {\n        state.status = action.payload;\n        state.acceptedInvite = false; /* reset invite accepted flag */\n        state.inviteCompanyId = \"\";\n      })\n      .addCase(getAvatar.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.earlyAdopter = action.payload.earlyAdopter;\n        state.created = action.payload.created;\n        state.avatar = action.payload.avatar;\n        state.defaultAvatarColor = action.payload.defaultAvatarColor;\n        state.defaultAvatarFontColor = action.payload.defaultAvatarFontColor;\n      })\n      /*\n      .addCase(saveAvatar.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.avatar = action.payload;\n      })\n      .addCase(saveAvatar.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(removeAvatar.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.avatar = action.payload;\n      })\n      \n      .addCase(removeAvatar.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n        */\n      .addCase(login.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.status = 'loggedIn';\n        state.loggingIn = action.payload.loggingIn;\n        state.acceptedInvite = action.payload.isInvite;\n        state.inviteCompanyId = action.payload.companyId;\n        state.accessToken = action.payload.accessToken;\n        let payload = decodeToken(action.payload.accessToken);\n        if (payload) {\n          state._id = payload._id;\n          state.email = payload.email;\n          state.firstName = payload.given_name;\n          state.lastName = payload.family_name;\n        }\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n        if (state.errorMessage === \"Your account needs activated.\") {\n          state.activationNeeded = true;\n        }\n      })\n      .addCase(socialLogin.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(socialLogin.fulfilled, (state, action) => {\n        state.status = 'loggedIn';\n        state.loggingIn = action.payload.loggingIn;\n        state.acceptedInvite = action.payload.isInvite;\n        state.inviteCompanyId = action.payload.companyId;\n        state.accessToken = action.payload.accessToken;\n        let payload = decodeToken(action.payload.accessToken);\n        if (payload) {\n          state._id = payload._id;\n          state.email = payload.email;\n          state.firstName = payload.given_name;\n          state.lastName = payload.family_name;\n        }\n      })\n      .addCase(socialLogin.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(refreshAccessToken.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(refreshAccessToken.fulfilled, (state, action) => {\n        state.status = 'idle';\n        //console.log(action.payload);\n        state.accessToken = action.payload;\n        let payload = decodeToken(action.payload);\n        if (payload) {\n          //console.log(payload);\n          //state.type = payload.type;\n          state._id = payload._id;\n          state.email = payload.email;\n          state.firstName = payload.given_name;\n          state.lastName = payload.family_name;\n        }\n      })\n      .addCase(refreshAccessToken.rejected, (state) => {\n        state.status = 'failed';\n        state.accessToken = \"\"; /* log user out */\n      })\n\n      .addCase(logout.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(logout.fulfilled, (state) => {\n        state.status = 'idle';\n        state.accessToken = \"\";\n      })\n      .addCase(logout.rejected, (state) => {\n        state.status = 'failed';\n      })\n      .addCase(logoutForInvite.fulfilled, (state) => {\n        state.status = 'idle';\n        state.loggedOutForInvite = true;\n      })\n      .addCase(logoutForInvite.rejected, (state) => {\n        state.status = 'failed';\n        state.loggedOutForInvite = true;\n      })\n      .addCase(register.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(register.fulfilled, (state, action) => {\n        \n          state.status = 'loggedIn';\n          state.loggingIn = action.payload.loggingIn;\n          state.acceptedInvite = action.payload.isInvite;\n          state.inviteCompanyId = action.payload.companyId;\n          state.accessToken = action.payload.accessToken;\n          state.sessionId = action.payload.sessionId;\n          let payload = decodeToken(action.payload.accessToken);\n          if (payload) {\n            state._id = payload._id;\n            state.email = payload.email;\n            state.firstName = payload.given_name;\n            state.lastName = payload.family_name;\n          }\n\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(activateUser.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(activateUser.fulfilled, (state) => {\n        state.status = 'idle';\n      })\n      .addCase(activateUser.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(resendActivationLink.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(resendActivationLink.fulfilled, (state) => {\n        state.status = 'idle';\n      })\n      .addCase(resendActivationLink.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(sendRecoveryLink.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(sendRecoveryLink.fulfilled, (state) => {\n        state.status = 'idle';\n      })\n      .addCase(sendRecoveryLink.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n      .addCase(resetPassword.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(resetPassword.fulfilled, (state) => {\n        state.status = 'idle';\n      })\n      .addCase(resetPassword.rejected, (state, action) => {\n        state.status = 'failed';\n        state.errorMessage = action.error.message as string;\n      })\n  },\n});\n\nexport const { setAccessToken, setLoggingIn, resetActivationNeeded } = User.actions;\n//export const { increment, decrement, incrementByAmount } = counterSlice.actions;\n\n// The function below is called a selector and allows us to select a value from\n// the state. Selectors can also be defined inline where they're used instead of\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\nexport const getUser = (state: RootState) => state.user;\n\n// We can also write thunks by hand, which may contain both sync and async logic.\n// Here's an example of conditionally dispatching actions based on current state.\n/*export const incrementIfOdd =\n  (amount: number): AppThunk =>\n  (dispatch, getState) => {\n    const currentValue = selectCount(getState());\n    if (currentValue % 2 === 1) {\n      dispatch(incrementByAmount(amount));\n    }\n  };*/\n\nexport default User.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}